<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header mb-4">
    <div>
      <h2 class="fw-bold mb-1">
        ðŸ‘‹ Bonjour, {{ currentUser?.nom_complet }}
      </h2>
      <p class="text-muted">Bienvenue sur votre espace personnel</p>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary"></div>
    <p class="mt-3">Chargement du tableau de bord...</p>
  </div>

  <!-- Statistiques Cards -->
  <div class="row g-4 mb-4" *ngIf="!loading">
    <!-- Mes Documents -->
    <div class="col-md-3">
      <div class="stat-card card-blue">
        <div class="stat-icon">
          <i class="fas fa-file-alt"></i>
        </div>
        <div class="stat-info">
          <h3>{{ stats.mesDocuments }}</h3>
          <p>Mes Documents</p>
        </div>
      </div>
    </div>

    <!-- Documents Accessibles -->
    <div class="col-md-3">
      <div class="stat-card card-green">
        <div class="stat-icon">
          <i class="fas fa-folder-open"></i>
        </div>
        <div class="stat-info">
          <h3>{{ stats.documentsAccessibles }}</h3>
          <p>Documents Accessibles</p>
        </div>
      </div>
    </div>

    <!-- Notifications -->
    <div class="col-md-3">
      <div class="stat-card card-orange" [routerLink]="['/employe/notifications']" style="cursor: pointer;">
        <div class="stat-icon">
          <i class="fas fa-bell"></i>
        </div>
        <div class="stat-info">
          <h3>{{ stats.notificationsNonLues }}</h3>
          <p>Notifications</p>
        </div>
      </div>
    </div>

    <!-- TÃ©lÃ©chargements -->
    <div class="col-md-3">
      <div class="stat-card card-purple">
        <div class="stat-icon">
          <i class="fas fa-download"></i>
        </div>
        <div class="stat-info">
          <h3>{{ stats.telechargements }}</h3>
          <p>TÃ©lÃ©chargements</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Actions Rapides -->
  <div class="card modern-card mb-4">
    <div class="card-body">
      <h5 class="card-title mb-3">
        <i class="fas fa-bolt me-2"></i>
        Actions Rapides
      </h5>
      <div class="quick-actions">
        <button class="btn btn-primary" [routerLink]="['/employe/mes-documents']">
          <i class="fas fa-plus-circle me-2"></i>
          Ajouter un Document
        </button>
        <button class="btn btn-success" [routerLink]="['/employe/acces']">
          <i class="fas fa-folder-open me-2"></i>
          Documents Accessibles
        </button>
        <button class="btn btn-info" [routerLink]="['/employe/notifications']">
          <i class="fas fa-bell me-2"></i>
          Mes Notifications
        </button>
      </div>
    </div>
  </div>

  <div class="row g-4">
    <!-- Mes Documents RÃ©cents -->
    <div class="col-lg-6">
      <div class="card modern-card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fas fa-file-alt me-2"></i>
            Mes Documents RÃ©cents
          </h5>
        </div>
        <div class="card-body">
          <!-- Aucun document -->
          <div *ngIf="recentDocuments.length === 0" class="text-center py-4">
            <i class="fas fa-folder-open fa-3x text-muted mb-3"></i>
            <p class="text-muted">Aucun document pour le moment</p>
            <button class="btn btn-sm btn-primary" [routerLink]="['/employe/mes-documents']">
              Ajouter un document
            </button>
          </div>

          <!-- Liste des documents -->
          <div class="document-list" *ngIf="recentDocuments.length > 0">
            <div *ngFor="let doc of recentDocuments" class="document-item">
              <div class="doc-icon">
                <i class="fas fa-file-pdf text-danger"></i>
              </div>
              <div class="doc-info">
                <h6>{{ doc.titre }}</h6>
                <p class="text-muted mb-0">
                  <small>
                    {{ doc.typeDocument?.libelle_type }} â€¢
                    {{ formatFileSize(doc.file_size) }} â€¢
                    {{ formatTime(doc.created_at) }}
                  </small>
                </p>
              </div>
              <div class="doc-actions">
                <button
                  class="btn btn-sm btn-outline-primary"
                  (click)="downloadDocument(doc)"
                  title="TÃ©lÃ©charger"
                >
                  <i class="fas fa-download"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Voir plus -->
          <div class="text-center mt-3" *ngIf="recentDocuments.length > 0">
            <button class="btn btn-sm btn-outline-primary" [routerLink]="['/employe/mes-documents']">
              Voir tous mes documents
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Notifications RÃ©centes -->
    <div class="col-lg-6">
      <div class="card modern-card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fas fa-bell me-2"></i>
            Notifications RÃ©centes
          </h5>
        </div>
        <div class="card-body">
          <!-- Aucune notification -->
          <div *ngIf="recentNotifications.length === 0" class="text-center py-4">
            <i class="fas fa-bell-slash fa-3x text-muted mb-3"></i>
            <p class="text-muted">Aucune notification</p>
          </div>

          <!-- Liste des notifications -->
          <div class="notification-list" *ngIf="recentNotifications.length > 0">
            <div *ngFor="let notif of recentNotifications" class="notification-item">
              <div class="notif-icon-small">
                <i [class]="getNotificationIcon(notif.type_notification)"></i>
              </div>
              <div class="notif-content-small">
                <h6>{{ notif.titre }}</h6>
                <p class="text-muted mb-0">
                  <small>{{ notif.message }}</small>
                </p>
                <small class="text-muted">{{ formatTime(notif.created_at) }}</small>
              </div>
              <span class="badge bg-primary" *ngIf="notif.statut === 'non_lu'">Nouveau</span>
            </div>
          </div>

          <!-- Voir plus -->
          <div class="text-center mt-3" *ngIf="recentNotifications.length > 0">
            <button class="btn btn-sm btn-outline-primary" [routerLink]="['/employe/notifications']">
              Voir toutes les notifications
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ActivitÃ© RÃ©cente -->
  <div class="card modern-card mt-4" *ngIf="recentActivities.length > 0">
    <div class="card-header">
      <h5 class="mb-0">
        <i class="fas fa-history me-2"></i>
        Mon ActivitÃ© RÃ©cente
      </h5>
    </div>
    <div class="card-body">
      <div class="activity-list">
        <div *ngFor="let activity of recentActivities" class="activity-item">
          <div class="activity-icon">
            <i [class]="getActionIcon(activity.type_action)"></i>
          </div>
          <div class="activity-content">
            <p class="mb-1">
              <strong>{{ activity.type_action | titlecase }}</strong>
              <span *ngIf="activity.document"> - {{ activity.document.titre }}</span>
            </p>
            <small class="text-muted">{{ formatTime(activity.created_at) }}</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
